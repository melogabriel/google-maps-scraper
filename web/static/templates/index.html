<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Maps Scraper</title>
    <link rel="stylesheet" href="/static/styles.css"> 
    <script src="https://unpkg.com/htmx.org@1.9.2"></script>
</head>
<body>
    <header>
        <h1>Google Maps Scraper</h1>
        <a href="/docs">API Documentation</a>
    </header>

    <div class="container">
        <aside>
            <form id="job-form" hx-post="/submit" hx-target="#job-list" hx-swap="beforeend">
                <fieldset>
                    <legend>Job Details</legend>

                    <label for="job-name">Job Name:</label>
                    <input type="text" id="job-name" name="name" required>

                    <label for="keywords">Keywords:</label>
                    <textarea id="keywords" name="keywords" required></textarea>

                    <label for="language">Language:</label>
                    <input type="text" id="language" name="language" value="en">

                    <details>
                        <summary>Location Settings</summary>
                    </details>

                    <details>
                        <summary>Advanced Options</summary>
                    </details>

                    <details>
                        <summary>Proxies</summary>
                    </details>

                    <button type="submit">Start Scraping</button>
                </fieldset>
            </form>
        </aside>

        <main>
            <table>
                <thead>
                    <tr>
                        <th>Job ID</th>
                        <th>Job Name</th>
                        <th>Job Date</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="job-list">
                    {{range .Jobs}}
                    <tr>
                        <td>{{.ID}}</td>
                        <td>{{.Name}}</td>
                        <td>{{.Date}}</td>
                        <td>
                            <span class="status-indicator status-{{.Status}}">{{.Status}}</span>
                        </td>
                        <td>
                            {{ if eq .Status "ok" }}
                                <a href="/download?id={{.ID}}" download class="button download-button">Download</a>
                            {{ end }}
                            <button hx-delete="/delete?id={{.ID}}" 
                                    hx-target="closest tr"
                                    hx-swap="outerHTML"
                                    hx-confirm="Are you sure you want to delete this job?"
                                    class="delete-button">Delete</button>
                        </td>
                    </tr>
                    {{end}}
                </tbody>
            </table>
        </main>
    </div>
</body>
</html>
